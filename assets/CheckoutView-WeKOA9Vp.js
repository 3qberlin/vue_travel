import{_ as V,m as k,a as E,i as q,c as f,b as t,F as $,j as T,t as r,d as a,w as b,r as p,o as x,n as h,k as A,e as N}from"./index-UOxPaadh.js";import{c as g}from"./cartPinia-DB6eQ0bl.js";import{a as d}from"./axios-G2rPRu76.js";var I={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_API_NAME:"berlin",BASE_URL:"/vue_week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:i,VITE_API_NAME:m}=I,M={computed:{...k(g,["carts","final_total","total"])},methods:{...E(g,["getCarts","pinia_carts","carts"]),addProduct(s){const e={product_id:s.product_id,qty:s.qty+1};console.log("cart",e);const l=`${i}/api/${m}/cart/${s.id}`;d.put(l,{data:e}).then(()=>{this.carts.qty=e.qty,this.getCarts()})},reduceProduct(s){const e={product_id:s.product_id,qty:s.qty-1};console.log("cart",e);const l=`${i}/api/${m}/cart/${s.id}`;d.put(l,{data:e}).then(()=>{this.carts.qty=e.qty,this.getCarts()})},delCartItem(s){const e=`${i}/api/${m}/cart/${s}`;d.delete(e).then(()=>{this.getCarts()}).catch(l=>{alert(l.response.data.message)})},couponTicket(){const s={code:this.couponContent},e=`${i}/api/${m}/coupon`;d.post(e,{data:s}).then(l=>{this.final_total=l.data.data.final_total,this.getCarts()})},buildOrder(){const s=`${i}/api/${m}/order`,e=this.form;d.post(s,{data:e}).then(()=>{this.$router.push({name:"checkoutSuccess"}),this.getCarts()}).catch(l=>{alert(l.response.data.message)})}},mounted(){this.getCarts()},data(){return{couponContent:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}}},P={class:"container"},U=t("div",{class:"row justify-content-center"},[t("div",{class:"col-md-10"},[t("h3",{class:"fw-bold mb-4 pt-3"},"結帳")])],-1),j={class:"row flex-row-reverse justify-content-center pb-5"},L={class:"col-md-4"},R={class:"border p-4 mb-4"},D=["src"],S={class:"w-100"},B={class:"d-flex justify-content-between"},O={class:"mb-0 fw-bold"},F={class:"mb-0"},z={class:"mb-0 fw-bold"},G={class:"table mt-4 border-top border-bottom text-muted"},H=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"},"小計",-1),J={class:"text-end border-0 px-0 pt-4"},K=t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"},"付款方式"),t("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"LinePay")],-1),Q={class:"d-flex justify-content-between mt-4"},W=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),X={class:"mb-0 h4 fw-bold"},Y={class:"col-md-6"},Z=t("p",null,"聯絡資訊",-1),tt={class:"mb-0"},et=t("label",{for:"ContactMail",class:"text-muted mb-0"},"Email ",-1),st={class:"mb-2"},ot=t("label",{for:"ContactName",class:"text-muted mb-0 mt-2"},"姓名 ",-1),at={class:"mb-2"},lt=t("label",{for:"ContactTel",class:"text-muted mb-0 mt-2"},"電話 ",-1),nt={class:"mb-2"},ct=t("label",{for:"ContactAddress",class:"text-muted mb-0 mt-2"},"地址 ",-1),rt={class:"mb-2"},dt=t("label",{for:"ContactMessage",class:"text-muted mb-0"},"備註",-1),it={class:"form-control",rows:"3",id:"ContactMessage",placeholder:"其他留言"},mt={class:"d-flex flex-column-reverse flex-md-row mt-4 justify-content-between align-items-center align-items-end w-100"},_t=t("i",{class:"bi bi-arrow-left"},null,-1),ut=t("a",{class:"ms-3 text-decoration-none text-muted text-nowrap h-100"},"回 購物車",-1);function pt(s,e,l,ht,n,w){const _=p("v-field"),u=p("ErrorMessage"),C=p("v-form"),v=p("RouterLink"),y=q("modal");return x(),f("div",P,[U,t("div",j,[t("div",L,[t("div",R,[(x(!0),f($,null,T(s.carts,o=>(x(),f("div",{class:"d-flex",key:o},[t("img",{src:o.product.imagesUrl,alt:"",class:"me-2",style:{width:"48px",height:"48px","object-fit":"cover"}},null,8,D),t("div",S,[t("div",B,[t("p",O,r(o.product.title),1),t("p",F,"NT$"+r(o.product.price),1)]),t("p",z,r(o.product.num)+" 組",1)])]))),128)),t("table",G,[t("tbody",null,[t("tr",null,[H,t("td",J,"NT$"+r(this.final_total),1)]),K])]),t("div",Q,[W,t("p",X,"NT$"+r(this.final_total),1)])])]),t("div",Y,[Z,a(C,null,{default:b(({errors:o})=>[t("div",tt,[et,a(_,{name:"email",type:"email",rules:"required|email",class:h(["form-control",{"is-invalid":o.email}]),id:"ContactMail",placeholder:"example@gmail.com",modelValue:n.form.user.email,"onUpdate:modelValue":e[0]||(e[0]=c=>n.form.user.email=c)},null,8,["modelValue","class"]),a(u,{class:"text-danger",name:"email"})]),t("div",st,[ot,a(_,{name:"姓名",type:"text",rules:"required",class:h(["form-control",{"is-invalid":o.姓名}]),id:"ContactName",placeholder:"王 小明",modelValue:n.form.user.name,"onUpdate:modelValue":e[1]||(e[1]=c=>n.form.user.name=c)},null,8,["modelValue","class"]),a(u,{class:"text-danger",name:"姓名"})]),t("div",at,[lt,a(_,{name:"電話",type:"tel",rules:"required",class:h(["form-control",{"is-invalid":o.電話}]),id:"ContactTel",placeholder:"0912345678",modelValue:n.form.user.tel,"onUpdate:modelValue":e[2]||(e[2]=c=>n.form.user.tel=c)},null,8,["modelValue","class"]),a(u,{class:"text-danger",name:"電話"})]),t("div",nt,[ct,a(_,{name:"地址",type:"text",rules:"required",class:h(["form-control",{"is-invalid":o.地址}]),id:"ContactAddress",placeholder:"台灣台北市大安區羅斯福利101號",modelValue:n.form.user.address,"onUpdate:modelValue":e[3]||(e[3]=c=>n.form.user.address=c)},null,8,["modelValue","class"]),a(u,{class:"text-danger",name:"地址"})]),t("div",rt,[dt,A(t("textarea",it,null,512),[[y,n.form.message]])])]),_:1}),t("div",mt,[a(v,{to:"/cart",class:"text-dark mt-md-0 mt-3 d-flex align-items-center"},{default:b(()=>[_t,ut]),_:1}),a(v,{to:"/checkout",class:"mx-5 btn btn-dark w-100 mt-4",onClick:e[4]||(e[4]=o=>w.buildOrder())},{default:b(()=>[N("送出訂單")]),_:1})])])])])}const vt=V(M,[["render",pt]]);export{vt as default};
