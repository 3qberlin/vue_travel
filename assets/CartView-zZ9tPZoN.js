import{_ as y,m as f,a as C,c,b as t,F as g,j as v,k as x,v as k,t as d,g as w,d as $,w as q,r as E,o as r,e as P}from"./index-646d3E2P.js";import{c as h}from"./cartPinia-ZjtynpuZ.js";import{a as i}from"./axios-G2rPRu76.js";var T={VITE_API_URL:"https://vue3-course-api.hexschool.io/v2/",VITE_API_NAME:"berlin",BASE_URL:"/vue_week8/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:l,VITE_API_NAME:p}=T,V={computed:{...f(h,["carts","final_total","total"])},methods:{...C(h,["getCarts","pinia_carts","carts"]),addProduct(o){const s={product_id:o.product_id,qty:o.qty+1},n=`${l}/api/${p}/cart/${o.id}`;i.put(n,{data:s}).then(()=>{this.carts.qty=s.qty,this.getCarts()})},reduceProduct(o){const s=o.qty;if(console.log("condition",s),s===1)alert("訂房數量最低為1間，欲刪除整筆請點擊紅色按鈕");else{const n={product_id:o.product_id,qty:o.qty-1},_=`${l}/api/${p}/cart/${o.id}`;i.put(_,{data:n}).then(()=>{this.carts.qty=n.qty,this.getCarts()})}},delCartItem(o){const s=`${l}/api/${p}/cart/${o}`;i.delete(s).then(()=>{this.getCarts()}).catch(n=>{alert(n.response.data.message)})},couponTicket(){const o={code:this.couponContent},s=`${l}/api/${p}/coupon`;i.post(s,{data:o}).then(n=>{this.final_total=n.data.data.final_total,this.noneCoupon="已套用優惠券",this.getCarts()}).catch(n=>{this.noneCoupon=n.response.data.message})}},mounted(){this.getCarts()},data(){return{couponContent:"",noneCoupon:""}}},I={class:"container"},A={class:"mt-3"},N=t("h3",{class:"mt-3 mb-4"},"購物車",-1),R={class:"row"},L={class:"col-md-8"},D={class:"table"},S=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"border-0 ps-0"},"品項"),t("th",{scope:"col",class:"border-0"},"數量"),t("th",{scope:"col",class:"border-0"},"單價"),t("th",{scope:"col",class:"border-0"})])],-1),U={scope:"row",class:"border-0 px-0 font-weight-normal py-4"},B=["src"],M={class:"mb-0 fw-bold ms-3 d-inline-block"},j={class:"border-0 align-middle",style:{"max-width":"160px"}},F={class:"input-group pe-5"},O={class:"input-group-prepend"},z={class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon1"},G=["onClick"],H=["value","id"],J={class:"input-group-append"},K={class:"btn btn-outline-dark border-0 py-2",type:"button",id:"button-addon2"},Q=["onClick"],W={class:"border-0 align-middle"},X={class:"mb-0 ms-auto"},Y={class:"border-0 align-middle"},Z=["onClick"],tt={class:"input-group w-50 mb-3"},ot={class:"input-group-append"},st={class:"btn btn-outline-dark border-bottom border-top-0 border-start-0 border-end-0 rounded-0",type:"button",id:"button-addon2"},et={key:0},nt={class:"col-md-4"},at={class:"border p-4 mb-4"},dt=t("h4",{class:"fw-bold mb-4"},"訂單資料",-1),ct={class:"table text-muted border-bottom"},rt=t("th",{scope:"row",class:"border-0 px-0 pt-4 font-weight-normal"}," 小計 ",-1),it={class:"text-end border-0 px-0 pt-4"},lt=t("tr",null,[t("th",{scope:"row",class:"border-0 px-0 pt-0 pb-4 font-weight-normal"}," 付款方式 "),t("td",{class:"text-end border-0 px-0 pt-0 pb-4"},"LinePay")],-1),pt={class:"d-flex justify-content-between mt-4"},_t=t("p",{class:"mb-0 h4 fw-bold"},"總計",-1),ut={class:"mb-0 h4 fw-bold"};function bt(o,s,n,_,u,a){const m=E("RouterLink");return r(),c("div",I,[t("div",A,[N,t("div",R,[t("div",L,[t("table",D,[S,t("tbody",null,[(r(!0),c(g,null,v(o.carts,e=>(r(),c("tr",{class:"border-bottom border-top",key:e},[t("th",U,[t("img",{src:e.product.imagesUrl,alt:"",style:{width:"72px",height:"72px","object-fit":"cover"}},null,8,B),t("p",M,d(e.product.title),1)]),t("td",j,[t("div",F,[t("div",O,[t("button",z,[t("i",{class:"bi bi-dash",onClick:b=>a.reduceProduct(e)},null,8,G)])]),t("input",{type:"text",class:"form-control border-0 text-center my-auto shadow-none",placeholder:"","aria-label":"Example text with button addon","aria-describedby":"button-addon1",value:e.qty,id:e.id},null,8,H),t("div",J,[t("button",K,[t("i",{class:"bi bi-plus-lg",onClick:b=>a.addProduct(e)},null,8,Q)])])])]),t("td",W,[t("p",X,d(e.qty*e.product.price),1)]),t("td",Y,[t("i",{class:"bi bi-trash3 text-danger",style:{cursor:"pointer"},onClick:b=>a.delCartItem(e.id)},null,8,Z)])]))),128))])]),t("div",tt,[x(t("input",{type:"text",class:"form-control rounded-0 border-bottom border-top-0 border-start-0 border-end-0 shadow-none",placeholder:"Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2","onUpdate:modelValue":s[0]||(s[0]=e=>u.couponContent=e)},null,512),[[k,u.couponContent]]),t("div",ot,[t("button",st,[t("i",{class:"bi bi-ticket-perforated",onClick:s[1]||(s[1]=(...e)=>a.couponTicket&&a.couponTicket(...e))})]),this.noneCoupon?(r(),c("span",et,d(this.noneCoupon),1)):w("",!0)])])]),t("div",nt,[t("div",at,[dt,t("table",ct,[t("tbody",null,[t("tr",null,[rt,t("td",it,"NT$"+d(this.total),1)]),lt])]),t("div",pt,[_t,t("p",ut,"NT$"+d(this.final_total),1)]),$(m,{to:"/checkout",class:"btn btn-dark w-100 mt-4"},{default:q(()=>[P("送出訂單")]),_:1})])])])])])}const ft=y(V,[["render",bt]]);export{ft as default};
